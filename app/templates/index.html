<!-- templates/index.html -->
{% extends "layout.html" %}

{% block title %}
Dashboard Overview
{% endblock %}

{% block content %}
<div class="dashboard-window">

    <!-- This is the new two-column container -->
    <div class="dashboard-container">
        <!-- Left Sidebar Panel -->
        <aside class="left-panel">
            {% include 'components/hero-section.html' %}
            {% include 'components/knowledge-card.html' %}
            {% include 'components/behavior-card.html' %}
            {% include 'components/wellbeing-card.html' %}
        </aside>

        <!-- Right Main Content Panel -->
        <main class="right-panel">
            <!-- Row 1: Analysis Charts and Loan Overview Side-by-Side -->
            <div class="charts-row">
                <!-- Left: Analysis Charts (3 compartments) -->
                <div class="charts-column charts-column--main">
                    {% include 'components/visual_analytics.html' %}
                </div>

                <!-- Right: Loan Overview -->
                <div class="charts-column charts-column--side">
                    <div class="loan-overview-container">
                        <h4 class="mb-3">
                            <i class="fas fa-hand-holding-usd"></i> Outstanding Loan Overview
                        </h4>

                        <!-- KPI Cards -->
                        <div class="loan-kpi-cards-compact">
                            <div class="loan-kpi-card primary">
                                <div class="loan-kpi-label">Total with Loans</div>
                                <div class="loan-kpi-value" id="loan-total-value"></div>
                                <div class="loan-kpi-subtext" id="loan-total-subtext"></div>
                            </div>
                            <div class="loan-kpi-card success">
                                <div class="loan-kpi-label">Average Loan</div>
                                <div class="loan-kpi-value" id="loan-avg-value"></div>
                                <div class="loan-kpi-subtext">Among borrowers</div>
                            </div>
                            <div class="loan-kpi-card warning">
                                <div class="loan-kpi-label" id="loan-third-label">Total Outstanding</div>
                                <div class="loan-kpi-value" id="loan-third-value"></div>
                                <div class="loan-kpi-subtext" id="loan-third-subtext"></div>
                            </div>
                            <div class="loan-kpi-card danger">
                                <div class="loan-kpi-label">Maximum Loan</div>
                                <div class="loan-kpi-value" id="loan-max-value"></div>
                                <div class="loan-kpi-subtext">Highest outstanding</div>
                            </div>
                        </div>

                        <!-- Loan Charts Section -->
                        <div class="loan-charts-grid-compact mt-3">
                            <div class="chart-container-compact">
                                <div id="loan-overview-chart" style="width: 100%; height: 180px;"></div>
                            </div>
                            <div class="chart-container-compact">
                                <div id="loan-purpose-chart" style="width: 100%; height: 180px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Row 2: Digital Time Spent Distribution (Full Width) -->
            <div class="charts-section-panel mt-4">
                <h4 class="mb-3">
                    <i class="fas fa-mobile-alt"></i> Digital Time Spent Distribution
                </h4>
                <div class="chart-container">
                    <div id="digital-time-chart" style="width: 100%; height: 380px;">
                        <div class="placeholder-content"
                            style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <h6 class="mt-3 text-muted">Loading Digital Engagement Data...</h6>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
{% endblock %}